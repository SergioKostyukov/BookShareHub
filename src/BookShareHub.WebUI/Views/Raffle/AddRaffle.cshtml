@model AddRaffleModel

@using BookShareHub.Core.Domain.Enums;

<div class="row" style="height: 85vh;">
	<div class="col-md-7" style="height: 100%;">
		<form asp-controller="Raffle" style="height: 100%;" asp-action="AddRaffle" method="post" autocomplete="off" enctype="multipart/form-data">
			<div class="background-block" style="height: 96%; flex-direction: inherit;">
				<div class="card-body">
					<div class="form-group">
						<label asp-for="Type" class="control-label">@Localizer["Genre"]</label>
						<select asp-for="Type" class="form-control">
							@foreach (var genre in Enum.GetValues(typeof(RaffleType)))
							{
								<option value="@genre">@genre</option>
							}
						</select>
					</div>
					<div class="form-group">
						<label asp-for="Description" class="control-label">@Localizer["Description"]</label>
						<textarea asp-for="Description" class="form-control" rows="4"></textarea>
					</div>
					<div class="form-group">
						<label asp-for="TicketPrice" class="control-label">@Localizer["Price"]</label>
						<input asp-for="TicketPrice" class="form-control" />
					</div>
					<div class="form-group">
						<label asp-for="EndDateTime" class="control-label">@Localizer["End Date & Time"]</label>
						<input asp-for="EndDateTime" class="form-control" type="datetime-local" />
						<span asp-validation-for="EndDateTime" class="text-danger"></span>
					</div>
				</div>
				<input type="hidden" asp-for="OwnerId" />
				<input type="hidden" asp-for="OrderId" />
			</div>
			<div class="row d-flex justify-content-center">
				<div class="btn-confirm-container">
					<button type="submit" class="btn btn-primary">@Localizer["Create raffle"]</button>
				</div>
			</div>
		</form>
	</div>

	<div class="col-md-5" style="height: 100%;">
		<div class="background-block" style="height: calc(48% - 5px);">
			<h4>@Localizer["Raffle items"]</h4>
			<div class="items">
				@if (Model.RaffleList != null && Model.RaffleList.Any())
				{
					@foreach (var orderItem in Model.RaffleList)
					{
						<div class="row order-item">
							<div class="col-md-2">
								<img src="@orderItem.ImagePath" asp-append-version="true" class="img-fluid rounded" alt="Book Image">
							</div>
							<div class="col-md-8">
								<p style="font-weight: bold;">@orderItem.Title</p>
								<p>@orderItem.Author</p>
								<p>@orderItem.Price.ToString("C")</p>
							</div>
							<div class="col-md-2 btn-remove-container">
								<form method="post" action="@Url.Action("RemoveBookFromRaffle", "Raffle")">
									<input type="hidden" asp-for="DeleteBookDetails.OrderId" value="@Model.OrderId" />
									<input type="hidden" asp-for="DeleteBookDetails.Id" value="@orderItem.Id" />
									<input type="hidden" asp-for="DeleteBookDetails.Price" value="@orderItem.Price" />
									<button type="submit" class="btn btn-remove">
										<span aria-hidden="true">&times;</span>
									</button>
								</form>
							</div>
						</div>
					}
				}
				else
				{
					<p>@Localizer["No available"]</p>
				}
			</div>
		</div>
		<div class="background-block" style="height: calc(48% - 5px);">
			<h4>@Localizer["My other books"]</h4>
			<div class="items">
				@if (Model.MyOtherBooks != null && Model.MyOtherBooks.Any())
				{
					@foreach (var orderItem in Model.MyOtherBooks)
					{
						<div class="row order-item item-ref" onclick="location.href='@Url.Action("AddBookToRaffle", "Raffle", new { id = orderItem.Id })'">
							<div class="col-md-2">
								<img src="@orderItem.ImagePath" asp-append-version="true" class="img-fluid rounded" alt="Book Image">
							</div>
							<div class="col-md-8">
								<p style="font-weight: bold;">@orderItem.Title</p>
								<p>@orderItem.Author</p>
								<p>@orderItem.Price.ToString("C")</p>
							</div>
						</div>
					}
				}
				else
				{
					<p>@Localizer["No available"]</p>
				}
			</div>
		</div>
		<form asp-controller="Raffle" asp-action="DeleteRaffle" method="post" autocomplete="off">
			<input type="hidden" name="id" value="@Model.OrderId" />
			<div class="btn-confirm-container">
				<button type="submit" class="btn btn-danger">@Localizer["Delete raffle"]</button>
			</div>
		</form>
	</div>
</div>

@section Styles {
	<link rel="stylesheet" href="~/css/backgroundBlock.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/order.css" asp-append-version="true" />
}

